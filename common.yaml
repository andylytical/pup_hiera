---
###
# Keep lookup_options at TOP
###

lookup_options:
    sudo::configs:
        merge:
            strategy: deep
            merge_hash_arrays: true

###
# Everything else should be sorted alphabetically
###

baseline_cfg::networkmanager::enable: true
baseline_cfg::networkmanager::ensure: running

chronyd::servers: [ 'pool.ntp.org' ]

firewalld::default_zone: public
firewalld::zones:
    public:
        target: DROP
        #purge_rich_rules: true
        #purge_services: true
        #purge_ports: true

lsst_system_authnz::access::access_allow:
    'Allow group lsst_sysadm from ALL':
        group: lsst_sysadm
        origin: ALL
lsst_system_authnz::access::access_deny_before:
    'Deny group lsst_disabled from ALL':
        group: lsst_disabled
        origin: ALL
    'Deny group all_disabled_usr from ALL':
        group: all_disabled_usr
        origin: ALL

ntp::package_ensure: absent
ntp::service_manage: false
ntp::step_tickers_file: ~

rsyslog::client::log_local: true
rsyslog::client::remote_servers: false
rsyslog::client::remote_type: 'tcp'
rsyslog::client::preserve_fqdn: true

sudo::configs:
    defaults:
        priority: 0
        content:
            - 'Defaults   !visiblepw'
            - 'Defaults    always_set_home'
            - 'Defaults    env_reset'
            - 'Defaults    env_keep =  "COLORS DISPLAY HOSTNAME HISTSIZE KDEDIR LS_COLORS"'
            - 'Defaults    env_keep += "MAIL PS1 PS2 QTDIR USERNAME LANG LC_ADDRESS LC_CTYPE"'
            - 'Defaults    env_keep += "LC_COLLATE LC_IDENTIFICATION LC_MEASUREMENT LC_MESSAGES"'
            - 'Defaults    env_keep += "LC_MONETARY LC_NAME LC_NUMERIC LC_PAPER LC_TELEPHONE"'
            - 'Defaults    env_keep += "LC_TIME LC_ALL LANGUAGE LINGUAS _XKB_CHARSET XAUTHORITY"'
            - 'Defaults    match_group_by_gid'
            - 'Defaults    secure_path = /sbin:/bin:/usr/sbin:/usr/bin'
            - 'root ALL=(ALL)   ALL'
            - '%wheel   ALL=(ALL)   ALL'
    common_disabled_users:
        priority: 1
        content:
            - '#deny former NCSA users'
            - '%all_disabled_usr ALL=(ALL) !ALL'
            - '#deny users in lsst_disabled LDAP group'
            - '%lsst_disabled ALL=(ALL) !ALL'
    common_lsst_admins:
        priority: 10
        content:
            - '%lsst_sysadm ALL=(ALL) NOPASSWD: ALL'
